<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (0)
 -->
<!-- Pages: 1 -->
<svg width="855pt" height="290pt"
 viewBox="0.00 0.00 854.55 290.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 286)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-286 850.55,-286 850.55,4 -4,4"/>
<!-- script -->
<g id="node1" class="node">
<title>script</title>
<polygon fill="none" stroke="black" points="407.55,-282 359.55,-282 359.55,-246 413.55,-246 413.55,-276 407.55,-282"/>
<polyline fill="none" stroke="black" points="407.55,-282 407.55,-276 "/>
<polyline fill="none" stroke="black" points="413.55,-276 407.55,-276 "/>
<text text-anchor="middle" x="386.55" y="-260.3" font-family="Times,serif" font-size="14.00">script</text>
</g>
<!-- gateway -->
<g id="node2" class="node">
<title>gateway</title>
<ellipse fill="none" stroke="black" cx="386.55" cy="-141" rx="40.09" ry="18"/>
<text text-anchor="middle" x="386.55" y="-137.3" font-family="Times,serif" font-size="14.00">gateway</text>
</g>
<!-- script&#45;&gt;gateway -->
<g id="edge1" class="edge">
<title>script&#45;&gt;gateway</title>
<path fill="none" stroke="black" d="M383.71,-245.87C382.14,-235.52 380.35,-222.04 379.55,-210 378.67,-196.54 379.95,-181.62 381.65,-169.19"/>
<polygon fill="black" stroke="black" points="385.15,-169.43 383.21,-159.02 378.23,-168.37 385.15,-169.43"/>
<text text-anchor="middle" x="407.05" y="-198.8" font-family="Times,serif" font-size="14.00">1. api key</text>
</g>
<!-- gateway&#45;&gt;script -->
<g id="edge10" class="edge">
<title>gateway&#45;&gt;script</title>
<path fill="none" stroke="black" d="M408.9,-156.26C421.34,-165.6 435.67,-179.02 442.55,-195 450.07,-212.47 437.08,-229 421.73,-241.4"/>
<polygon fill="black" stroke="black" points="419.49,-238.7 413.58,-247.48 423.68,-244.3 419.49,-238.7"/>
<text text-anchor="middle" x="480.05" y="-198.8" font-family="Times,serif" font-size="14.00">10. response</text>
</g>
<!-- keycloak -->
<g id="node3" class="node">
<title>keycloak</title>
<polygon fill="none" stroke="black" points="755.05,-159 690.05,-159 690.05,-123 755.05,-123 755.05,-159"/>
<text text-anchor="middle" x="722.55" y="-137.3" font-family="Times,serif" font-size="14.00">keycloak</text>
</g>
<!-- gateway&#45;&gt;keycloak -->
<g id="edge2" class="edge">
<title>gateway&#45;&gt;keycloak</title>
<path fill="none" stroke="black" d="M427.08,-141C490.9,-141 614.26,-141 679.57,-141"/>
<polygon fill="black" stroke="black" points="679.92,-144.5 689.92,-141 679.92,-137.5 679.92,-144.5"/>
<text text-anchor="middle" x="558.45" y="-147.8" font-family="Times,serif" font-size="14.00">2. send api key, skip redirect</text>
</g>
<!-- foo_service -->
<g id="node4" class="node">
<title>foo_service</title>
<ellipse fill="none" stroke="black" cx="524.55" cy="-18" rx="51.99" ry="18"/>
<text text-anchor="middle" x="524.55" y="-14.3" font-family="Times,serif" font-size="14.00">foo_service</text>
</g>
<!-- gateway&#45;&gt;foo_service -->
<g id="edge4" class="edge">
<title>gateway&#45;&gt;foo_service</title>
<path fill="none" stroke="black" d="M346.45,-139.19C239.51,-136.34 -41.28,-123.86 5.55,-72 35.7,-38.62 331.49,-25.13 462.57,-20.76"/>
<polygon fill="black" stroke="black" points="462.96,-24.25 472.84,-20.43 462.74,-17.26 462.96,-24.25"/>
<text text-anchor="middle" x="63.05" y="-75.8" font-family="Times,serif" font-size="14.00">4. authorization code</text>
</g>
<!-- gateway&#45;&gt;foo_service -->
<g id="edge8" class="edge">
<title>gateway&#45;&gt;foo_service</title>
<path fill="none" stroke="black" d="M346.64,-137.86C284.29,-133.06 174.74,-117.99 213.55,-72 244.76,-35.02 381.05,-23.84 462.49,-20.46"/>
<polygon fill="black" stroke="black" points="462.77,-23.95 472.63,-20.07 462.5,-16.96 462.77,-23.95"/>
<text text-anchor="middle" x="288.05" y="-75.8" font-family="Times,serif" font-size="14.00">8. request and access token</text>
</g>
<!-- keycloak&#45;&gt;gateway -->
<g id="edge3" class="edge">
<title>keycloak&#45;&gt;gateway</title>
<path fill="none" stroke="black" d="M689.6,-133.97C668.63,-129.86 640.83,-125.09 615.95,-123 565.02,-118.73 551.91,-119.02 500.95,-123 478.66,-124.74 454.15,-128.37 433.55,-131.91"/>
<polygon fill="black" stroke="black" points="432.72,-128.51 423.48,-133.69 433.93,-135.4 432.72,-128.51"/>
<text text-anchor="middle" x="558.45" y="-126.8" font-family="Times,serif" font-size="14.00">3. authorization code</text>
</g>
<!-- keycloak&#45;&gt;foo_service -->
<g id="edge6" class="edge">
<title>keycloak&#45;&gt;foo_service</title>
<path fill="none" stroke="black" d="M692.09,-122.93C674.07,-112.72 650.87,-99.36 630.55,-87 605.22,-71.59 576.98,-53.42 556.02,-39.74"/>
<polygon fill="black" stroke="black" points="557.8,-36.72 547.51,-34.18 553.97,-42.58 557.8,-36.72"/>
<text text-anchor="middle" x="672.05" y="-75.8" font-family="Times,serif" font-size="14.00">6. access token</text>
</g>
<!-- foo_service&#45;&gt;gateway -->
<g id="edge7" class="edge">
<title>foo_service&#45;&gt;gateway</title>
<path fill="none" stroke="black" d="M474.4,-23.02C441.52,-28.56 400.83,-41.58 379.55,-72 371.26,-83.86 372.46,-99.85 375.98,-113.34"/>
<polygon fill="black" stroke="black" points="372.7,-114.56 379.01,-123.06 379.38,-112.47 372.7,-114.56"/>
<text text-anchor="middle" x="421.05" y="-75.8" font-family="Times,serif" font-size="14.00">7. access token</text>
</g>
<!-- foo_service&#45;&gt;gateway -->
<g id="edge9" class="edge">
<title>foo_service&#45;&gt;gateway</title>
<path fill="none" stroke="black" d="M513.7,-35.69C503.66,-50.32 487.72,-71.6 470.55,-87 455.64,-100.38 436.96,-112.53 421,-121.82"/>
<polygon fill="black" stroke="black" points="418.95,-118.96 411.97,-126.94 422.4,-125.05 418.95,-118.96"/>
<text text-anchor="middle" x="515.55" y="-75.8" font-family="Times,serif" font-size="14.00">9. response</text>
</g>
<!-- foo_service&#45;&gt;keycloak -->
<g id="edge5" class="edge">
<title>foo_service&#45;&gt;keycloak</title>
<path fill="none" stroke="black" d="M572.92,-24.97C626.27,-32.67 707.05,-47.99 725.55,-72 734.35,-83.41 734.09,-99.38 731.4,-112.97"/>
<polygon fill="black" stroke="black" points="727.97,-112.24 728.98,-122.79 734.77,-113.92 727.97,-112.24"/>
<text text-anchor="middle" x="789.05" y="-75.8" font-family="Times,serif" font-size="14.00">5. authorization code</text>
</g>
<!-- api_key_mgmt_service -->
<g id="node5" class="node">
<title>api_key_mgmt_service</title>
<ellipse fill="none" stroke="black" cx="722.55" cy="-264" rx="93.68" ry="18"/>
<text text-anchor="middle" x="722.55" y="-260.3" font-family="Times,serif" font-size="14.00">api_key_mgmt_service</text>
</g>
<!-- api_key_mgmt_service&#45;&gt;keycloak -->
<g id="edge11" class="edge">
<title>api_key_mgmt_service&#45;&gt;keycloak</title>
<path fill="none" stroke="black" d="M722.55,-245.92C722.55,-226.04 722.55,-192.92 722.55,-169.42"/>
<polygon fill="black" stroke="black" points="726.05,-169.38 722.55,-159.38 719.05,-169.38 726.05,-169.38"/>
<text text-anchor="middle" x="754.55" y="-198.8" font-family="Times,serif" font-size="14.00">add api key</text>
</g>
</g>
</svg>
