<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.0 (0)
 -->
<!-- Pages: 1 -->
<svg width="433pt" height="290pt"
 viewBox="0.00 0.00 432.59 290.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 286)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-286 428.59,-286 428.59,4 -4,4"/>
<!-- script -->
<g id="node1" class="node">
<title>script</title>
<polygon fill="none" stroke="black" points="73,-282 25,-282 25,-246 79,-246 79,-276 73,-282"/>
<polyline fill="none" stroke="black" points="73,-282 73,-276 "/>
<polyline fill="none" stroke="black" points="79,-276 73,-276 "/>
<text text-anchor="middle" x="52" y="-260.3" font-family="Times,serif" font-size="14.00">script</text>
</g>
<!-- gateway -->
<g id="node2" class="node">
<title>gateway</title>
<ellipse fill="none" stroke="black" cx="52" cy="-141" rx="40.09" ry="18"/>
<text text-anchor="middle" x="52" y="-137.3" font-family="Times,serif" font-size="14.00">gateway</text>
</g>
<!-- script&#45;&gt;gateway -->
<g id="edge1" class="edge">
<title>script&#45;&gt;gateway</title>
<path fill="none" stroke="black" d="M49.15,-245.87C47.58,-235.52 45.79,-222.04 45,-210 44.11,-196.54 45.39,-181.62 47.09,-169.19"/>
<polygon fill="black" stroke="black" points="50.59,-169.43 48.65,-159.02 43.68,-168.37 50.59,-169.43"/>
<text text-anchor="middle" x="72.5" y="-198.8" font-family="Times,serif" font-size="14.00">1. api key</text>
</g>
<!-- gateway&#45;&gt;script -->
<g id="edge6" class="edge">
<title>gateway&#45;&gt;script</title>
<path fill="none" stroke="black" d="M74.34,-156.26C86.78,-165.6 101.12,-179.02 108,-195 115.51,-212.47 102.52,-229 87.17,-241.4"/>
<polygon fill="black" stroke="black" points="84.94,-238.7 79.02,-247.48 89.12,-244.3 84.94,-238.7"/>
<text text-anchor="middle" x="142" y="-198.8" font-family="Times,serif" font-size="14.00">6. response</text>
</g>
<!-- keycloak -->
<g id="node3" class="node">
<title>keycloak</title>
<polygon fill="none" stroke="black" points="363.5,-159 298.5,-159 298.5,-123 363.5,-123 363.5,-159"/>
<text text-anchor="middle" x="331" y="-137.3" font-family="Times,serif" font-size="14.00">keycloak</text>
</g>
<!-- gateway&#45;&gt;keycloak -->
<g id="edge2" class="edge">
<title>gateway&#45;&gt;keycloak</title>
<path fill="none" stroke="black" d="M92.56,-141C144.71,-141 234.84,-141 288.09,-141"/>
<polygon fill="black" stroke="black" points="288.22,-144.5 298.22,-141 288.22,-137.5 288.22,-144.5"/>
<text text-anchor="middle" x="195.39" y="-147.8" font-family="Times,serif" font-size="14.00">2. send api key, skip redirect</text>
</g>
<!-- foo_service -->
<g id="node4" class="node">
<title>foo_service</title>
<ellipse fill="none" stroke="black" cx="52" cy="-18" rx="51.99" ry="18"/>
<text text-anchor="middle" x="52" y="-14.3" font-family="Times,serif" font-size="14.00">foo_service</text>
</g>
<!-- gateway&#45;&gt;foo_service -->
<g id="edge4" class="edge">
<title>gateway&#45;&gt;foo_service</title>
<path fill="none" stroke="black" d="M49.15,-122.87C47.58,-112.52 45.79,-99.04 45,-87 44.11,-73.54 45.39,-58.62 47.09,-46.19"/>
<polygon fill="black" stroke="black" points="50.59,-46.43 48.65,-36.02 43.68,-45.37 50.59,-46.43"/>
<text text-anchor="middle" x="95" y="-75.8" font-family="Times,serif" font-size="14.00">4. id_token, token</text>
</g>
<!-- keycloak&#45;&gt;gateway -->
<g id="edge3" class="edge">
<title>keycloak&#45;&gt;gateway</title>
<path fill="none" stroke="black" d="M298.32,-132.47C282.47,-128.76 263.07,-124.84 245.39,-123 201.19,-118.4 189.64,-118.78 145.39,-123 129.77,-124.49 112.87,-127.36 97.79,-130.37"/>
<polygon fill="black" stroke="black" points="96.77,-127.01 87.69,-132.47 98.19,-133.86 96.77,-127.01"/>
<text text-anchor="middle" x="195.39" y="-126.8" font-family="Times,serif" font-size="14.00">3. id_token, token</text>
</g>
<!-- foo_service&#45;&gt;gateway -->
<g id="edge5" class="edge">
<title>foo_service&#45;&gt;gateway</title>
<path fill="none" stroke="black" d="M93.66,-29C128.55,-39.58 170.11,-58.69 153,-87 140.65,-107.43 117.53,-120.37 96.53,-128.34"/>
<polygon fill="black" stroke="black" points="95.35,-125.05 87.08,-131.67 97.67,-131.65 95.35,-125.05"/>
<text text-anchor="middle" x="188" y="-75.8" font-family="Times,serif" font-size="14.00">5. response</text>
</g>
<!-- api_key_mgmt_service -->
<g id="node5" class="node">
<title>api_key_mgmt_service</title>
<ellipse fill="none" stroke="black" cx="331" cy="-264" rx="93.68" ry="18"/>
<text text-anchor="middle" x="331" y="-260.3" font-family="Times,serif" font-size="14.00">api_key_mgmt_service</text>
</g>
<!-- api_key_mgmt_service&#45;&gt;keycloak -->
<g id="edge7" class="edge">
<title>api_key_mgmt_service&#45;&gt;keycloak</title>
<path fill="none" stroke="black" d="M331,-245.92C331,-226.04 331,-192.92 331,-169.42"/>
<polygon fill="black" stroke="black" points="334.5,-169.38 331,-159.38 327.5,-169.38 334.5,-169.38"/>
<text text-anchor="middle" x="363" y="-198.8" font-family="Times,serif" font-size="14.00">add api key</text>
</g>
</g>
</svg>
